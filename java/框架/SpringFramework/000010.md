### Springè§£æé…ç½®ç±»ä»¥åŠæ‰«ææºç è§£æ
---
#### æ‰§è¡ŒBeanFactoryPostProcessor

- æ‰§è¡Œé€šè¿‡ApplicationContextæ·»åŠ è¿›æ¥çš„BeanDefinitionRegistryPostProcessorçš„postProcessBeanDefinitionRegistry()æ–¹æ³•
- æ‰§è¡ŒBeanFactoryä¸­å®ç°äº†PriorityOrderedæ¥å£çš„BeanDefinitionRegistryPostProcessorçš„postProcessBeanDefinitionRegistry()æ–¹æ³•
- æ‰§è¡ŒBeanFactoryä¸­å®ç°äº†Orderedæ¥å£çš„BeanDefinitionRegistryPostProcessorçš„postProcessBeanDefinitionRegistry()æ–¹æ³•
- æ‰§è¡ŒBeanFactoryä¸­å…¶ä»–çš„BeanDefinitionRegistryPostProcessorçš„postProcessBeanDefinitionRegistry()æ–¹æ³•
- æ‰§è¡Œä¸Šé¢æ‰€æœ‰çš„BeanDefinitionRegistryPostProcessorçš„postProcessBeanFactory()æ–¹æ³•
- æ‰§è¡Œé€šè¿‡ApplicationContextæ·»åŠ è¿›æ¥çš„BeanFactoryPostProcessorçš„postProcessBeanFactory()æ–¹æ³•
- æ‰§è¡ŒBeanFactoryä¸­å®ç°äº†PriorityOrderedæ¥å£çš„BeanFactoryPostProcessorçš„postProcessBeanFactory()æ–¹æ³•
- æ‰§è¡ŒBeanFactoryä¸­å®ç°äº†Orderedæ¥å£çš„BeanFactoryPostProcessorçš„postProcessBeanFactory()æ–¹æ³•
- æ‰§è¡ŒBeanFactoryä¸­å…¶ä»–çš„BeanFactoryPostProcessorçš„postProcessBeanFactory()æ–¹æ³•

#### æ‰§è¡Œé…ç½®ç±»

![image-ConfigClass](../../demo/picture/Springé…ç½®ç±»è§£ææµç¨‹.png)

1. åœ¨å¯åŠ¨Springæ—¶ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªAppConfig.classç»™ApplicationContextï¼ŒApplicationContextä¼šæ ¹æ®AppConfigç±»å°è£…ä¸ºä¸€ä¸ªBeanDefinitionï¼Œè¿™ç§BeanDefinitionæˆ‘ä»¬æŠŠå®ƒç§°ä¸ºé…ç½®ç±»BeanDefinitionã€‚
2. ConfigurationClassPostProcessorä¸­ä¼šæŠŠé…ç½®ç±»BeanDefinitionå–å‡ºæ¥
3. æ„é€ ä¸€ä¸ªConfigurationClassParserç”¨æ¥è§£æé…ç½®ç±»BeanDefinitionï¼Œå¹¶ä¸”ä¼šç”Ÿæˆä¸€ä¸ªé…ç½®ç±»å¯¹è±¡ConfigurationClass
4. å¦‚æœé…ç½®ç±»ä¸Šå­˜åœ¨@Componentæ³¨è§£ï¼Œé‚£ä¹ˆè§£æé…ç½®ç±»ä¸­çš„å†…éƒ¨ç±»ï¼ˆè¿™é‡Œæœ‰é€’å½’ï¼Œå¦‚æœå†…éƒ¨ç±»ä¹Ÿæ˜¯é…ç½®ç±»çš„è¯ï¼‰
5. å¦‚æœé…ç½®ç±»ä¸Šå­˜åœ¨@PropertySourceæ³¨è§£ï¼Œé‚£ä¹ˆåˆ™è§£æè¯¥æ³¨è§£ï¼Œå¹¶å¾—åˆ°PropertySourceå¯¹è±¡ï¼Œå¹¶æ·»åŠ åˆ°environmentä¸­å»
6. å¦‚æœé…ç½®ç±»ä¸Šå­˜åœ¨@ComponentScanæ³¨è§£ï¼Œé‚£ä¹ˆåˆ™è§£æè¯¥æ³¨è§£ï¼Œè¿›è¡Œæ‰«æï¼Œæ‰«æå¾—åˆ°ä¸€ç³»åˆ—çš„BeanDefinitionå¯¹è±¡ï¼Œç„¶ååˆ¤æ–­è¿™äº›BeanDefinitionæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯é…ç½®ç±»BeanDefinitionï¼ˆåªè¦å­˜åœ¨@Componentæ³¨è§£å°±æ˜¯é…ç½®ç±»ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šæ‰«æå‡ºæ¥çš„éƒ½æ˜¯é…ç½®ç±»ï¼‰ï¼Œå¦‚æœæ˜¯åˆ™ç»§ç»­è§£æè¯¥é…ç½®ç±»ï¼Œï¼ˆä¹Ÿæœ‰é€’å½’ï¼‰ï¼Œå¹¶ä¸”ä¼šç”Ÿæˆå¯¹åº”çš„ConfigurationClass
7. å¦‚æœé…ç½®ç±»ä¸Šå­˜åœ¨@Importæ³¨è§£ï¼Œé‚£ä¹ˆåˆ™åˆ¤æ–­Importçš„ç±»çš„ç±»å‹ï¼š
  a. å¦‚æœæ˜¯ImportSelectorï¼Œé‚£ä¹ˆè°ƒç”¨æ‰§è¡ŒselectImportsæ–¹æ³•å¾—åˆ°ç±»åï¼Œç„¶ååœ¨æŠŠè¿™ä¸ªç±»å½“åšé…ç½®ç±»è¿›è¡Œè§£æï¼ˆä¹Ÿæ˜¯é€’å½’ï¼‰
  b. å¦‚æœæ˜¯ImportBeanDefinitionRegistrarï¼Œé‚£ä¹ˆåˆ™ç”Ÿæˆä¸€ä¸ªImportBeanDefinitionRegistrarå®ä¾‹å¯¹è±¡ï¼Œå¹¶æ·»åŠ åˆ°é…ç½®ç±»å¯¹è±¡ä¸­ï¼ˆConfigurationClassï¼‰çš„importBeanDefinitionRegistrarså±æ€§ä¸­ã€‚
8. å¦‚æœé…ç½®ç±»ä¸Šå­˜åœ¨@ImportResourceæ³¨è§£ï¼Œé‚£ä¹ˆåˆ™æŠŠå¯¼å…¥è¿›æ¥çš„èµ„æºè·¯å¾„å­˜åœ¨é…ç½®ç±»å¯¹è±¡ä¸­çš„importedResourceså±æ€§ä¸­ã€‚
9. å¦‚æœé…ç½®ç±»ä¸­å­˜åœ¨@Beançš„æ–¹æ³•ï¼Œé‚£ä¹ˆåˆ™æŠŠè¿™äº›æ–¹æ³•å°è£…ä¸ºBeanMethodå¯¹è±¡ï¼Œå¹¶æ·»åŠ åˆ°é…ç½®ç±»å¯¹è±¡ä¸­çš„beanMethodså±æ€§ä¸­ã€‚
10. å¦‚æœé…ç½®ç±»å®ç°äº†æŸäº›æ¥å£ï¼Œåˆ™çœ‹è¿™äº›æ¥å£å†…æ˜¯å¦å®šä¹‰äº†@Beançš„é»˜è®¤æ–¹æ³•
11. å¦‚æœé…ç½®ç±»æœ‰çˆ¶ç±»ï¼Œåˆ™æŠŠçˆ¶ç±»å½“åšé…ç½®ç±»è¿›è¡Œè§£æ
12. AppConfigè¿™ä¸ªé…ç½®ç±»ä¼šå¯¹åº”ä¸€ä¸ªConfigurationClassï¼ŒåŒæ—¶åœ¨è§£æçš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šç”Ÿæˆå¦å¤–çš„ä¸€äº›ConfigurationClassï¼Œæ¥ä¸‹æ¥å°±åˆ©ç”¨readeræ¥è¿›ä¸€æ­¥è§£æConfigurationClass
  a. å¦‚æœConfigurationClassæ˜¯é€šè¿‡@Importæ³¨è§£å¯¼å…¥è¿›æ¥çš„ï¼Œåˆ™æŠŠè¿™ä¸ªç±»ç”Ÿæˆä¸€ä¸ªBeanDefinitionï¼ŒåŒæ—¶è§£æè¿™ä¸ªç±»ä¸Š@Scope,@Lazyç­‰æ³¨è§£ä¿¡æ¯ï¼Œå¹¶æ³¨å†ŒBeanDefinition
  b. å¦‚æœConfigurationClassä¸­å­˜åœ¨ä¸€äº›BeanMethodï¼Œä¹Ÿå°±æ˜¯å®šä¹‰äº†ä¸€äº›@Beanï¼Œé‚£ä¹ˆåˆ™è§£æè¿™äº›@Beanï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„BeanDefinitionï¼Œå¹¶æ³¨å†Œ
  c. å¦‚æœConfigurationClassä¸­å¯¼å…¥äº†ä¸€äº›èµ„æºæ–‡ä»¶ï¼Œæ¯”å¦‚xx.xmlï¼Œé‚£ä¹ˆåˆ™è§£æè¿™äº›xx.xmlæ–‡ä»¶ï¼Œå¾—åˆ°å¹¶æ³¨å†ŒBeanDefinition
  d. å¦‚æœConfigurationClassä¸­å¯¼å…¥äº†ä¸€äº›ImportBeanDefinitionRegistrarï¼Œé‚£ä¹ˆåˆ™æ‰§è¡Œå¯¹åº”çš„registerBeanDefinitionsè¿›è¡ŒBeanDefinitionçš„æ³¨å†Œ

#### æ€»ç»“

- è§£æAppConfigç±»ï¼Œç”Ÿæˆå¯¹åº”çš„ConfigurationClass
- å†æ‰«æï¼Œæ‰«æåˆ°çš„ç±»éƒ½ä¼šç”Ÿæˆå¯¹åº”çš„BeanDefinitionï¼Œå¹¶ä¸”åŒæ—¶è¿™äº›ç±»ä¹Ÿæ˜¯ConfigurationClass
- å†è§£æConfigurationClassçš„å…¶ä»–ä¿¡æ¯ï¼Œæ¯”å¦‚@ImportResourceæ³¨è§£çš„å¤„ç†ï¼Œ@Importæ³¨è§£çš„å¤„ç†ï¼Œ@Beanæ³¨è§£çš„å¤„ç†
---
*[ğŸ‘ˆ 0000 Javaç›®å½•](../../0000Javaç›®å½•.md)*

*[415 å‡ºå“ï¼Œå¿…å±ç²¾å“](../../../note.md)*