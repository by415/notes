### Springä¸­åŸºæœ¬æ¦‚å¿µ

---

#### BeanDefinitionã€BeanFactoryã€Beançš„åŸºæœ¬æ¦‚å¿µ

- é¦–å…ˆè¦åŒºåˆ†BeanDefinitionå’ŒBeanå¯¹è±¡  BeanDefinitionæ˜¯beanå¯¹è±¡çš„å®šä¹‰ï¼Œå…ˆæœ‰beanDefinitonååˆBeanå¯¹è±¡ã€‚ ä¹‹åå°±å¯ä»¥åœ¨BeanDefinitonMap<name,BeanDefinition>ä¸­åˆ¤æ–­beanæœ‰æ²¡æœ‰å®šä¹‰ï¼Œæ‹¿åˆ°beanDefinitionï¼Œåˆ¤æ–­scopeæ˜¯ä¸æ˜¯å•ä¾‹çš„å¹¶ä¸”ä¸æ˜¯æ‡’åŠ è½½çš„å»å•ä¾‹æ± ä¸­å¾—åˆ°ï¼Œå¦‚æœå•ä¾‹æ± ä¸­æ²¡æœ‰åˆ™å»CreateBean()ï¼Œå¦‚æœæ˜¯prototypeï¼Œæ¯æ¬¡éƒ½å»åˆ›å»ºCreateBean()ã€‚ç„¶ååœ¨getBean()æ–¹æ³•é‡Œé¢å»åˆ¤æ–­æ˜¯ä¸æ˜¯lazy.

#### Beançš„ç”Ÿå‘½å‘¨æœŸã€Beançš„åç½®å¤„ç†å™¨çš„æ¦‚å¿µ

- ä¸ºä»€ä¹ˆè¦æœ‰beançš„åç½®å¤„ç†å™¨ï¼Œä¸¾ä¸ªä¾‹å­@Autowiredå’Œ@Resources Springæœ‰ä¸¤ä¸ªä¸åŒä¸ç±»æˆ–è€…é€»è¾‘å»å¤„ç†ï¼Œè€Œä¸”æ”¯æŒä½ è‡ªå·±å®šä¹‰è‡ªå·±æ³¨è§£ ç¼–å†™è‡ªå·±çš„åç½®å¤„ç†å™¨æ¥å¤„ç† 

#### BeanDefinition

- æè¿°beançš„å¯¹è±¡ï¼Œæˆ‘ä»¬é€šè¿‡<bean/>ï¼Œ@Beanï¼Œ@Componentç­‰æ–¹å¼æ‰€å®šä¹‰çš„Beanï¼Œæœ€ç»ˆéƒ½ä¼šè¢«è§£æä¸ºBeanDefinitionå¯¹è±¡,BeanDefinitioå¯ä»¥ç†è§£ä¸ºåº•å±‚æºç çº§åˆ«çš„ä¸€ä¸ªæ¦‚å¿µï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºSpringæä¾›çš„ä¸€ç§**APIä½¿ç”¨**çš„æ–¹å¼ã€‚

- é¦–å…ˆæ˜¯æ‰«æ@Beanæˆ–è€…æ˜¯xmlä¸­çš„beanæ ‡ç­¾ï¼Œç”ŸæˆGenericBeanDenitionï¼Œä¿å­˜åˆ°beanDefinitionMapä¸­ï¼Œ

- å½“getBeançš„æ—¶å€™ï¼Œæ˜¯ä»MergentBeanDefinitionä¸­æŸ¥æ‰¾ï¼Œæ²¡æœ‰åˆ™å»beanDefinitionMapå¾—åˆ°GenericBeanDenitionï¼Œåˆ¤æ–­ä»–æœ‰æ²¡æœ‰parentå±æ€§ï¼Œé€’å½’è¦†ç›–ç”Ÿæˆä¸ºRootBeanDenition,å¹¶å­˜å…¥MergentBeanDefinition

```java
AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext();
// å®šä¹‰äº†ä¸€ä¸ªBeanDefinition
AbstractBeanDefinition beanDefinition = BeanDefinitionBuilder.genericBeanDefinition().getBeanDefinition();
// å½“å‰Beanå¯¹è±¡çš„ç±»å‹
beanDefinition.setBeanClass(Person.class);
// è®¾ç½®ä½œç”¨åŸŸ
beanDefinition.setScope("prototype");
// è®¾ç½®åˆå§‹åŒ–æ–¹æ³•
beanDefinition.setInitMethodName("init");
// è®¾ç½®è‡ªåŠ¨è£…é…æ¨¡å‹
beanDefinition.setAutowireMode(AutowireCapableBeanFactory.AUTOWIRE_BY_TYPE); 
applicationContext.registerBeanDefinition("p",beanDefinition);
```

#### AnnotatedBeanDefinitionReader

- å¯ä»¥ç›´æ¥æŠŠæŸä¸ªç±»è½¬æ¢ä¸ºBeanDefinitionï¼Œè¿™ä¸ªç±»ä¸Šä¸ç”¨åŠ @Componantæ³¨è§£å¹¶ä¸”ä¼šè§£æè¯¥ç±»ä¸Šçš„æ³¨è§£

æ³¨æ„ï¼šå®ƒèƒ½è§£æçš„æ³¨è§£æ˜¯ï¼š@Conditionalï¼Œ@Scopeã€@Lazyã€@Primaryã€@DependsOnã€@Roleã€@Description

```java
AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext();
AnnotatedBeanDefinitionReader annotatedBeanDefinitionReader =new AnnotatedBeanDefinitionReader(applicationContext);
//å°†User.classè§£æä¸ºBeanDefinition
annotatedBeanDefinitionReader.register(Person.class);
applicationContext.refresh();
System.out.println(applicationContext.getBean("person"));
```

#### XmlBeanDefinitionReader

- å¯ä»¥è§£æ<bean/>æ ‡ç­¾

```java
XmlBeanDefinitionReader xmlBeanDefinitionReader = new XmlBeanDefinitionReader(applicationContext);
int i = xmlBeanDefinitionReader.loadBeanDefinitions("spring.xml");
System.out.println(i)
```

#### ClassPathBeanDefinitionScanner

- è¿™ä¸ªå¹¶ä¸æ˜¯BeanDefinitionReaderï¼Œä½†æ˜¯å®ƒçš„ä½œç”¨å’ŒBeanDefinitionReaderç±»ä¼¼ï¼Œå®ƒå¯ä»¥è¿›è¡Œæ‰«æï¼Œæ‰«ææŸä¸ªåŒ…è·¯å¾„ï¼Œå¯¹æ‰«æåˆ°çš„ç±»è¿›è¡Œè§£æï¼Œæ¯”å¦‚ï¼Œæ‰«æåˆ°çš„ç±»ä¸Šå¦‚æœå­˜åœ¨@Componentæ³¨è§£ï¼Œé‚£ä¹ˆå°±ä¼šæŠŠè¿™ä¸ªç±»è§£æä¸ºä¸€ä¸ªBeanDefinition

#### BeanFactory

- Springä¸­æ¯”è¾ƒæ ¸å¿ƒçš„æ˜¯BeanFactoryçš„å®ç°ç±»æ˜¯**DefaultListableBeanFactory**

![image-BeanFactoryMap](../../demo/picture/BeanFactoryMap.png)

å®ƒå®ç°äº†å¾ˆå¤šæ¥å£ï¼Œè¡¨ç¤ºï¼Œå®ƒæ‹¥æœ‰å¾ˆå¤šåŠŸèƒ½ï¼š

1. AliasRegistryï¼šæ”¯æŒåˆ«ååŠŸèƒ½ï¼Œä¸€ä¸ªåå­—å¯ä»¥å¯¹åº”å¤šä¸ªåˆ«å

2. BeanDefinitionRegistryï¼šå¯ä»¥æ³¨å†Œã€ä¿å­˜ã€ç§»é™¤ã€è·å–æŸä¸ªBeanDefinition

3. BeanFactoryï¼šBeanå·¥å‚ï¼Œå¯ä»¥æ ¹æ®æŸä¸ªbeançš„åå­—ã€æˆ–ç±»å‹ã€æˆ–åˆ«åè·å–æŸä¸ªBeanå¯¹è±¡

4. SingletonBeanRegistryï¼šå¯ä»¥ç›´æ¥æ³¨å†Œã€è·å–æŸä¸ª**å•ä¾‹**Bean

5. SimpleAliasRegistryï¼šå®ƒæ˜¯ä¸€ä¸ªç±»ï¼Œå®ç°äº†AliasRegistryæ¥å£ä¸­æ‰€å®šä¹‰çš„åŠŸèƒ½ï¼Œæ”¯æŒåˆ«ååŠŸèƒ½

6. ListableBeanFactoryï¼šåœ¨BeanFactoryçš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†å…¶ä»–åŠŸèƒ½ï¼Œå¯ä»¥è·å–æ‰€æœ‰BeanDefinitionçš„beanNamesï¼Œå¯ä»¥æ ¹æ®æŸä¸ªç±»å‹è·å–å¯¹åº”çš„beanNamesï¼Œå¯ä»¥æ ¹æ®æŸä¸ªç±»å‹è·å–{ç±»å‹ï¼šå¯¹åº”çš„Bean}çš„æ˜ å°„å…³ç³»

7. HierarchicalBeanFactoryï¼šåœ¨BeanFactoryçš„åŸºç¡€ä¸Šï¼Œæ·»åŠ äº†è·å–çˆ¶BeanFactoryçš„åŠŸèƒ½

8. DefaultSingletonBeanRegistryï¼šå®ƒæ˜¯ä¸€ä¸ªç±»ï¼Œå®ç°äº†SingletonBeanRegistryæ¥å£ï¼Œæ‹¥æœ‰äº†ç›´æ¥æ³¨å†Œã€è·å–æŸä¸ª**å•ä¾‹**Beançš„åŠŸèƒ½

9. ConfigurableBeanFactoryï¼šåœ¨HierarchicalBeanFactoryå’ŒSingletonBeanRegistryçš„åŸºç¡€ä¸Šï¼Œæ·»åŠ äº†è®¾ç½®çˆ¶BeanFactoryã€ç±»åŠ è½½å™¨ï¼ˆè¡¨ç¤ºå¯ä»¥æŒ‡å®šæŸä¸ªç±»åŠ è½½å™¨è¿›è¡Œç±»çš„åŠ è½½ï¼‰ã€è®¾ç½®Spring ELè¡¨è¾¾å¼è§£æå™¨ï¼ˆè¡¨ç¤ºè¯¥BeanFactoryå¯ä»¥è§£æELè¡¨è¾¾å¼ï¼‰ã€è®¾ç½®ç±»å‹è½¬åŒ–æœåŠ¡ï¼ˆè¡¨ç¤ºè¯¥BeanFactoryå¯ä»¥è¿›è¡Œç±»å‹è½¬åŒ–ï¼‰ã€å¯ä»¥æ·»åŠ BeanPostProcessorï¼ˆè¡¨ç¤ºè¯¥BeanFactoryæ”¯æŒBeançš„åç½®å¤„ç†å™¨ï¼‰ï¼Œå¯ä»¥åˆå¹¶BeanDefinitionï¼Œå¯ä»¥é”€æ¯æŸä¸ªBeanç­‰ç­‰åŠŸèƒ½

10. FactoryBeanRegistrySupportï¼šæ”¯æŒäº†FactoryBeançš„åŠŸèƒ½

11. AutowireCapableBeanFactoryï¼šæ˜¯ç›´æ¥ç»§æ‰¿äº†BeanFactoryï¼Œåœ¨BeanFactoryçš„åŸºç¡€ä¸Šï¼Œæ”¯æŒåœ¨åˆ›å»ºBeançš„è¿‡ç¨‹ä¸­èƒ½å¯¹Beanè¿›è¡Œè‡ªåŠ¨è£…é…

12. AbstractBeanFactoryï¼šå®ç°äº†ConfigurableBeanFactoryæ¥å£ï¼Œç»§æ‰¿äº†FactoryBeanRegistrySupportï¼Œè¿™ä¸ªBeanFactoryçš„åŠŸèƒ½å·²ç»å¾ˆå…¨é¢äº†ï¼Œä½†æ˜¯ä¸èƒ½è‡ªåŠ¨è£…é…å’Œè·å–beanNames

13. ConfigurableListableBeanFactoryï¼šç»§æ‰¿äº†ListableBeanFactoryã€AutowireCapableBeanFactoryã€ConfigurableBeanFactory

14. AbstractAutowireCapableBeanFactoryï¼šç»§æ‰¿äº†AbstractBeanFactoryï¼Œå®ç°äº†AutowireCapableBeanFactoryï¼Œæ‹¥æœ‰äº†è‡ªåŠ¨è£…é…çš„åŠŸèƒ½

15. DefaultListableBeanFactoryï¼šç»§æ‰¿äº†AbstractAutowireCapableBeanFactoryï¼Œå®ç°äº†ConfigurableListableBeanFactoryæ¥å£å’ŒBeanDefinitionRegistryæ¥å£ï¼Œæ‰€ä»¥DefaultListableBeanFactoryçš„åŠŸèƒ½å¾ˆå¼ºå¤§

    é€šè¿‡ä»¥ä¸Šåˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œé€šè¿‡DefaultListableBeanFactoryæˆ‘ä»¬å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œæ¯”å¦‚ï¼š

    ```java
    AbstractBeanDefinition beanDefinition = BeanDefinitionBuilder.genericBeanDefinition().getBeanDefinition();
    beanDefinition.setBeanClass(User.class);
    
    DefaultListableBeanFactory beanFactory = new DefaultListableBeanFactory();
    
    // æ³¨å†ŒBeanDefinition
    beanFactory.registerBeanDefinition("user", beanDefinition);
    // æ³¨å†Œåˆ«å
    beanFactory.registerAlias("user", "user1");
    // æ³¨å†ŒBeanPostProcessor
    beanFactory.addBeanPostProcessor(new LubanBeanPostProcessor());
    
    // è·å–Beanå¯¹è±¡
    System.out.println(beanFactory.getBean("user1"));
    // æ ¹æ®ç±»å‹è·å–beanNames
    System.out.println(beanFactory.getBeanNamesForType(User.class));
    ```

#### ApplicationContext
- é¦–å…ˆApplicationContextæ˜¯ä¸ªæ¥å£ï¼Œå¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ªç‰¹æ®Šçš„BeanFactory

![image-ApplicationContextMap](../../demo/picture/ApplicationContextMap.png)

1. HierarchicalBeanFactoryï¼šæ‹¥æœ‰è·å–çˆ¶BeanFactoryçš„åŠŸèƒ½

2. ListableBeanFactoryï¼šæ‹¥æœ‰è·å–beanNamesçš„åŠŸèƒ½

3. ResourcePatternResolverï¼šèµ„æºåŠ è½½å™¨ï¼Œå¯ä»¥ä¸€æ¬¡æ€§è·å–å¤šä¸ªèµ„æºï¼ˆæ–‡ä»¶èµ„æºç­‰ç­‰

4. EnvironmentCapableï¼šå¯ä»¥è·å–è¿è¡Œæ—¶ç¯å¢ƒï¼ˆæ²¡æœ‰è®¾ç½®è¿è¡Œæ—¶ç¯å¢ƒåŠŸèƒ½ï¼‰

5. ApplicationEventPublisherï¼šæ‹¥æœ‰   bceï¼šæ‹¥æœ‰å›½é™…åŒ–åŠŸèƒ½ 

#### å›½é™…åŒ–

å…ˆå®šä¹‰ä¸€ä¸ªMessageSource:

```java
@Bean
public MessageSource messageSource() {
    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
    messageSource.setBasename("messages");
    return messageSource;
}
```

æœ‰äº†è¿™ä¸ªBeanï¼Œä½ å¯ä»¥åœ¨ä½ ä»»æ„æƒ³è¦è¿›è¡Œå›½é™…åŒ–çš„åœ°æ–¹ä½¿ç”¨è¯¥MessageSourceã€‚

åŒæ—¶ï¼Œå› ä¸ºApplicationContextä¹Ÿæ‹¥æœ‰å›½å®¶åŒ–çš„åŠŸèƒ½ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è¿™ä¹ˆç”¨ï¼š

```java
annotationConfigApplicationContext.getMessage("test", null, new Locale("en_CN"))
```

#### èµ„æºåŠ è½½

ApplicationContextè¿˜æ‹¥æœ‰èµ„æºåŠ è½½çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨ApplicationContextè·å–æŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼š

```java
Resource resource = annotationConfigApplicationContext.getResource("file://D:\\IdeaProjects\\spring-framework\\luban\\src\\main\\java\\com\\luban\\entity\\User.java");
System.out.println(resource.contentLength());
```

ä½ å¯ä»¥æƒ³æƒ³ï¼Œå¦‚æœä½ ä¸ä½¿ç”¨ApplicationContextï¼Œè€Œæ˜¯è‡ªå·±æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå°±æ¯”è¾ƒè´¹æ—¶é—´äº†ã€‚

è¿˜æ¯”å¦‚ä½ å¯ä»¥ï¼š

```java
Resource resource = annotationConfigApplicationContext.getResource("classpath:com/luban/entity/User.class");
System.out.println(resource.contentLength());
```

è¿˜å¯ä»¥ä¸€æ¬¡æ€§è·å–å¤šä¸ªï¼š

```java
Resource[] resources = annotationConfigApplicationContext.getResources("classpath:com/luban/service/*.class");
for (Resource resource : resources) {
    System.out.println(resource.contentLength());
}
```

è¿™ä¸ªåŠŸèƒ½ç”¨åˆ°äº†**ç­–ç•¥æ¨¡å¼**ã€‚

#### è·å–è¿è¡Œæ—¶ç¯å¢ƒ

```java
// è·å–JVMæ‰€å…è®¸çš„æ“ä½œç³»ç»Ÿçš„ç¯å¢ƒ
annotationConfigApplicationContext.getEnvironment().getSystemEnvironment();

// è·å–JVMæœ¬èº«çš„ä¸€äº›å±æ€§ï¼ŒåŒ…æ‹¬-Dæ‰€è®¾ç½®çš„
annotationConfigApplicationContext.getEnvironment().getSystemProperties();

// è¿˜å¯ä»¥ç›´æ¥è·å–æŸä¸ªç¯å¢ƒæˆ–propertiesæ–‡ä»¶ä¸­çš„å±æ€§
annotationConfigApplicationContext.getEnvironment().getProperty("xxx")
```

â€‹	æ³¨æ„ï¼Œä¹Ÿå¯ä»¥å°†æŸä¸ªpropertiesæ–‡ä»¶ä¸­çš„å‚æ•°åŠ è½½åˆ°è¿è¡Œç¯å¢ƒä¸­

```java
@PropertySource("classpath:application.properties")
```

#### äº‹ä»¶å‘å¸ƒ

å…ˆå®šä¹‰ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨

```java
@Bean
public ApplicationListener applicationListener() {
    return new ApplicationListener() {
        @Override
        public void onApplicationEvent(ApplicationEvent event) {
            System.out.println("æ¥æ”¶åˆ°äº†ä¸€ä¸ªäº‹ä»¶");
        }
    };
}
```

ç„¶åå‘å¸ƒä¸€ä¸ªäº‹ä»¶

```java
annotationConfigApplicationContext.publishEvent("kkk");
```

#### ç±»å‹è½¬åŒ–

##### PropertyEditor

JDKä¸­æä¾›çš„ç±»å‹è½¬åŒ–å·¥å…·ç±»,Springä¹Ÿæ”¯æŒjdkçš„ç±»å‹è½¬æ¢å·¥å…·  ä½†æ˜¯åªæ”¯æŒStringè½¬å…¶ä»–

```java
public class StringToUserPropertyEditor extends PropertyEditorSupport implements PropertyEditor {

    @Override
    public void setAsText(String text) throws IllegalArgumentException {
        User user = new User();
        user.setName(text);
        this.setValue(user);
    }
}
```

```java
StringToUserPropertyEditor propertyEditor = new StringToUserPropertyEditor();
propertyEditor.setAsText("1");
User value = (User) propertyEditor.getValue();
System.out.println(value);
```

å¦‚ä½•å‘Springä¸­æ³¨å†ŒPropertyEditor:

```java
@Bean
public CustomEditorConfigurer customEditorConfigurer() {
    CustomEditorConfigurer customEditorConfigurer = new CustomEditorConfigurer();
    Map<Class<?>, Class<? extends PropertyEditor>> propertyEditorMap = new HashMap<>();
    propertyEditorMap.put(User.class, StringToUserPropertyEditor.class);
    customEditorConfigurer.setCustomEditors(propertyEditorMap);
    return customEditorConfigurer;
}
```

å‡è®¾ç°åœ¨æœ‰å¦‚ä¸‹Bean:

```java
@Component
public class UserService {

    @Value("true")
    User test;

    public void test() {
        System.out.println(test);
    }
}
```

é‚£ä¹ˆtestå±æ€§å°±èƒ½æ­£å¸¸çš„å®Œæˆå±æ€§èµ‹å€¼

##### ConversionService

Springä¸­æä¾›çš„ç±»å‹è½¬åŒ–æœåŠ¡ï¼Œå®ƒæ¯”PropertyEditoræ›´å¼ºå¤§

```java
public class StringToUserConverter implements ConditionalGenericConverter {

    @Override
    public boolean matches(TypeDescriptor sourceType, TypeDescriptor targetType) {
        return sourceType.getType().equals(String.class) && targetType.getType().equals(User.class);
    }

    @Override
    public Set<ConvertiblePair> getConvertibleTypes() {
        return Collections.singleton(new ConvertiblePair(String.class, User.class));
    }

    @Override
    public Object convert(Object source, TypeDescriptor sourceType, TypeDescriptor targetType) {
        User user = new User();
        user.setName((String)source);
        return user;
    }
}
```

```java
DefaultConversionService conversionService = new DefaultConversionService();
conversionService.addConverter(new StringToUserConverter());
User value = conversionService.convert("1", User.class);
System.out.println(value);
```

å¦‚ä½•å‘Springä¸­æ³¨å†ŒConversionService:

```java
@Bean
public ConversionServiceFactoryBean conversionService() {
    ConversionServiceFactoryBean conversionServiceFactoryBean = new ConversionServiceFactoryBean();
    conversionServiceFactoryBean.setConverters(Collections.singleton(new StringToUserConverter()));

    return conversionServiceFactoryBean;
}
```

##### TypeConverter

æ•´åˆäº†PropertyEditorå’ŒConversionServiceçš„åŠŸèƒ½ï¼Œæ˜¯Springå†…éƒ¨ç”¨çš„

```java
SimpleTypeConverter typeConverter = new SimpleTypeConverter();
typeConverter.registerCustomEditor(User.class, new StringToUserPropertyEditor());
//typeConverter.setConversionService(conversionService);
User value = typeConverter.convertIfNecessary("1", User.class);
System.out.println(value);
```

#### BeanPostProcessor

- Beançš„åç½®å¤„ç†å™¨ï¼Œå¯ä»¥åœ¨åˆ›å»ºæ¯ä¸ªBeançš„è¿‡ç¨‹ä¸­è¿›è¡Œå¹²æ¶‰ï¼Œæ˜¯å±äºBeanFactoryä¸­ä¸€ä¸ªå±æ€§

#### BeanFactoryPostProcessor

- Beanå·¥å‚çš„åç½®å¤„ç†å™¨ï¼Œæ˜¯å±äºApplicationContextä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œæ˜¯ApplicationContextåœ¨å®ä¾‹åŒ–ä¸€ä¸ªBeanFactoryåï¼Œå¯ä»¥åˆ©ç”¨BeanFactoryPostProcessorç»§ç»­å¤„ç†BeanFactoryã€‚

- ç¨‹åºå‘˜å¯ä»¥é€šè¿‡BeanFactoryPostProcessoré—´æ¥çš„è®¾ç½®BeanFactoryï¼Œæ¯”å¦‚ä¸Šæ–‡ä¸­çš„CustomEditorConfigurerå°±æ˜¯ä¸€ä¸ªBeanFactoryPostProcessorï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒå‘BeanFactoryä¸­æ·»åŠ è‡ªå®šä¹‰çš„PropertyEditorã€‚

#### FactoryBean

- å…è®¸ç¨‹åºå‘˜è‡ªå®šä¹‰ä¸€ä¸ªå¯¹è±¡é€šè¿‡FactoryBeané—´æ¥çš„æ”¾åˆ°Springå®¹å™¨ä¸­æˆä¸ºä¸€ä¸ªBeanã€‚

- é‚£ä¹ˆå®ƒå’Œ@Beançš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿå› ä¸º@Beanä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œè®©è¿™ä¸ªå¯¹è±¡æˆä¸ºä¸€ä¸ªBeanã€‚

- åŒºåˆ«åœ¨äºåˆ©ç”¨FactoryBeanå¯ä»¥æ›´åŠ å¼ºå¤§ï¼Œå› ä¸ºä½ é€šè¿‡å®šä¹‰ä¸€ä¸ªXxFactoryBeançš„ç±»ï¼Œå¯ä»¥å†å»å®ç°Springä¸­çš„å…¶ä»–æ¥å£ï¼Œæ¯”å¦‚å¦‚æœä½ å®ç°äº†BeanFactoryAwareæ¥å£ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨ä½ çš„XxFactoryBeanä¸­è·å–åˆ°Beanå·¥å‚ï¼Œä»è€Œä½¿ç”¨Beanå·¥å‚åšæ›´å¤šä½ æƒ³åšçš„ï¼Œè€Œ@Beanåˆ™ä¸è¡Œã€‚

æ‹“å±•:SmartFactoryBeanæ¥å£ï¼Œä»–æœ‰ä¸ªå±æ€§ï¼ŒisEagerInitæ–¹æ³•é»˜è®¤è¿”å›falseï¼Œä¸ºtrueæ—¶ï¼Œè¡¨ç¤ºç«‹å³ ï¼Œä¸ä¸ºæ‡’åŠ è½½


---
*[ğŸ‘ˆ 0000 Javaç›®å½•](../../0000Javaç›®å½•.md)*

*[415 å‡ºå“ï¼Œå¿…å±ç²¾å“](../../../note.md)*